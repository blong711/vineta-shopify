{%- comment -%}Header Section{%- endcomment -%}
<header id="header" class="header-default{% if section.settings.layout == 'layout-2' %} header-2{% endif %}{% if section.settings.layout == 'layout-3' %} header-3{% endif %}" style="background-color: {{ section.settings.background_color }};">
  {%- if section.settings.layout == 'layout-2' -%}
    <div class="header-top">
      <div class="container">
        <div class="row wrapper-header align-items-center">
          <div class="col-md-4 col-3 d-xl-none">
            <a href="#mobileMenu" class="mobile-menu" data-bs-toggle="offcanvas" aria-controls="mobileMenu">
              <i class="icon icon-categories1"></i>
            </a>
          </div>
          
          <div class="col-xl-5 d-none d-xl-block">
            <div class="header-language">
              <div class="tf-languages">
                <select class="image-select center style-default type-languages" name="language">
                  {% for locale in shop.published_locales %}
                    <option value="{{ locale.iso_code }}" {% if locale.primary %}selected{% endif %}>
                      {{ locale.name }}
                    </option>
                  {% endfor %}
                </select>
              </div>
              <div class="tf-currencies">
                <select class="image-select center style-default type-currencies" name="currency">
                  {% for currency in shop.enabled_currencies %}
                    <option value="{{ currency.iso_code }}" {% if currency == cart.currency %}selected{% endif %}>
                      {{ currency.iso_code }} ({{ currency.symbol }})
                    </option>
                  {% endfor %}
                </select>
              </div>
            </div>
          </div>

          <div class="col-xl-2 col-md-4 col-6 text-center">
            <a href="{{ routes.root_url }}" class="logo-header">
              {%- if section.settings.logo != blank -%}
                <img src="{{ section.settings.logo | image_url: width: section.settings.logo_width }}"
                  alt="{{ section.settings.logo.alt | default: shop.name }}"
                  width="{{ section.settings.logo_width }}"
                  height="{{ section.settings.logo_width | divided_by: section.settings.logo.aspect_ratio }}"
                  class="logo">
              {%- else -%}
                <span class="h4">{{ shop.name }}</span>
              {%- endif -%}
            </a>
          </div>

          <div class="col-xl-5 col-md-4 col-3">
            <ul class="nav-icon d-flex justify-content-end align-items-center">
              {%- for block in section.blocks -%}
                {%- if block.type == 'icons' -%}
                  {%- if block.settings.show_search -%}
                    <li class="nav-search">
                      <a href="#search" data-bs-toggle="offcanvas" class="nav-icon-item">
                        <i class="icon icon-search"></i>
                      </a>
                    </li>
                  {%- endif -%}

                  {%- if block.settings.show_account -%}
                    <li class="nav-account">
                      <a href="javascript:void(0);" class="nav-icon-item" data-bs-toggle="offcanvas" data-bs-target="#login">
                        <i class="icon icon-user"></i>
                      </a>
                    </li>
                  {%- endif -%}

                  {%- if block.settings.show_wishlist -%}
                    <li class="nav-wishlist">
                      <a href="/pages/wishlist" class="nav-icon-item">
                        <i class="icon icon-heart"></i>
                        <span class="count-box wishlist-count">0</span>
                      </a>
                    </li>
                  {%- endif -%}

                  {%- if block.settings.show_cart -%}
                    <li class="nav-cart">
                      <a href="#shoppingCart" data-bs-toggle="offcanvas" class="nav-icon-item">
                        <i class="icon icon-cart"></i>
                        <span class="count-box">{{ cart.item_count }}</span>
                      </a>
                    </li>
                  {%- endif -%}
                {%- endif -%}
              {%- endfor -%}
            </ul>
          </div>
        </div>
      </div>
    </div>

    <div class="header-bottom d-none d-xl-block">
      <div class="container">
        <nav class="box-navigation text-center">
          <ul class="box-nav-menu">
            {%- for block in section.blocks -%}
              {%- if block.type == 'menu_item' -%}
                <li class="menu-item">
                  <a href="{{ block.settings.link }}" class="item-link">
                    {{ block.settings.label }}
                  </a>
                </li>
              {%- endif -%}
            {%- endfor -%}
          </ul>
        </nav>
      </div>
    </div>
  {%- elsif section.settings.layout == 'layout-3' -%}
    <div class="container">
      <div class="row wrapper-header align-items-center">
        <div class="col-md-4 col-3 d-xl-none">
          <a href="#mobileMenu" class="mobile-menu" data-bs-toggle="offcanvas" aria-controls="mobileMenu">
            <i class="icon icon-categories1"></i>
          </a>
        </div>
        <div class="col-xxl-5 col-xl-6 d-none d-xl-block">
          <nav class="box-navigation text-center">
            <ul class="box-nav-menu justify-content-start">
              {%- for block in section.blocks -%}
                {%- if block.type == 'menu_item' -%}
                  <li class="menu-item">
                    <a href="{{ block.settings.link }}" class="item-link">
                      {{ block.settings.label }}
                    </a>
                  </li>
                {%- endif -%}
              {%- endfor -%}
            </ul>
          </nav>
        </div>

        <div class="col-xl-2 col-md-4 col-6 text-xxl-center">
          <a href="{{ routes.root_url }}" class="logo-header">
            {%- if section.settings.logo != blank -%}
              <img src="{{ section.settings.logo | image_url: width: section.settings.logo_width }}"
                alt="{{ section.settings.logo.alt | default: shop.name }}"
                width="{{ section.settings.logo_width }}"
                height="{{ section.settings.logo_width | divided_by: section.settings.logo.aspect_ratio }}"
                class="logo">
            {%- else -%}
              <span class="h4">{{ shop.name }}</span>
            {%- endif -%}
          </a>
        </div>

        <div class="col-xxl-5 col-xl-4 col-md-4 col-3">
          <ul class="nav-icon d-flex justify-content-end align-items-center">
            {%- for block in section.blocks -%}
              {%- if block.type == 'icons' -%}
                {%- if block.settings.show_search -%}
                  <li class="nav-search">
                    <a href="#search" data-bs-toggle="offcanvas" class="nav-icon-item">
                      <i class="icon icon-search"></i>
                    </a>
                  </li>
                {%- endif -%}

                {%- if block.settings.show_account -%}
                  <li class="nav-account">
                    <a href="javascript:void(0);" class="nav-icon-item" data-bs-toggle="offcanvas" data-bs-target="#login">
                      <i class="icon icon-user"></i>
                    </a>
                  </li>
                {%- endif -%}

                {%- if block.settings.show_wishlist -%}
                  <li class="nav-wishlist">
                    <a href="/pages/wishlist" class="nav-icon-item">
                      <i class="icon icon-heart"></i>
                      <span class="count-box wishlist-count">0</span>
                    </a>
                  </li>
                {%- endif -%}

                {%- if block.settings.show_cart -%}
                  <li class="nav-cart">
                    <a href="#shoppingCart" data-bs-toggle="offcanvas" class="nav-icon-item">
                      <i class="icon icon-cart"></i>
                      <span class="count-box">{{ cart.item_count }}</span>
                    </a>
                  </li>
                {%- endif -%}
              {%- endif -%}
            {%- endfor -%}
          </ul>
        </div>
      </div>
    </div>
  {%- else -%}
  <div class="container">
    <div class="row wrapper-header align-items-center">
      <div class="col-md-4 col-3 d-xl-none">
        <a href="#mobileMenu" class="mobile-menu" data-bs-toggle="offcanvas" aria-controls="mobileMenu">
          <i class="icon icon-categories1"></i>
        </a>
      </div>
      
      {%- for block in section.blocks -%}
        {%- case block.type -%}
          {%- when 'menu_item' -%}
            <div class="col-xl-8 d-none d-xl-block" {{ block.shopify_attributes }}>
              <nav class="box-navigation text-center">
                <ul class="box-nav-menu">
                  <li class="menu-item">
                    <a href="{{ block.settings.link }}" class="item-link">
                      {{ block.settings.label }}
                    </a>
                  </li>
                </ul>
              </nav>
            </div>
          {%- when 'icons' -%}
            <div class="col-xl-2 col-md-4 col-3" {{ block.shopify_attributes }}>
              <ul class="nav-icon d-flex justify-content-end align-items-center">
                {%- if block.settings.show_search -%}
                  <li class="nav-search">
                    <a href="#search" data-bs-toggle="offcanvas" class="nav-icon-item">
                      <i class="icon icon-search"></i>
                    </a>
                  </li>
                {%- endif -%}

                {%- if block.settings.show_account -%}
                  <li class="nav-account">
                    <a href="javascript:void(0);" class="nav-icon-item" data-bs-toggle="offcanvas" data-bs-target="#login">
                      <i class="icon icon-user"></i>
                    </a>
                  </li>
                {%- endif -%}

                {%- if block.settings.show_wishlist -%}
                  <li class="nav-wishlist">
                    <a href="/pages/wishlist" class="nav-icon-item">
                      <i class="icon icon-heart"></i>
                      <span class="count-box wishlist-count">0</span>
                    </a>
                  </li>
                {%- endif -%}

                {%- if block.settings.show_cart -%}
                  <li class="nav-cart">
                    <a href="#shoppingCart" data-bs-toggle="offcanvas" class="nav-icon-item">
                      <i class="icon icon-cart"></i>
                      <span class="count-box">{{ cart.item_count }}</span>
                    </a>
                  </li>
                {%- endif -%}
              </ul>
            </div>
        {%- endcase -%}
      {%- endfor -%}
    </div>
  </div>
  {%- endif -%}
</header>

{% schema %}
{
  "name": "Header",
  "settings": [
    {
      "type": "select",
      "id": "layout",
      "label": "Header Layout",
      "options": [
        {
          "value": "layout-1",
          "label": "Layout 1"
        },
        {
          "value": "layout-2",
          "label": "Layout 2"
        },
        {
          "value": "layout-3",
          "label": "Layout 3"
        }
      ],
      "default": "layout-1"
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "Background color",
      "default": "#ffffff"
    },
    {
      "type": "image_picker",
      "id": "logo",
      "label": "Logo"
    },
    {
      "type": "range",
      "id": "logo_width",
      "min": 50,
      "max": 250,
      "step": 10,
      "default": 100,
      "unit": "px",
      "label": "Logo width"
    },
    {
      "type": "link_list",
      "id": "menu",
      "label": "Menu",
      "default": "main-menu"
    }
  ],
  "blocks": [
    {
      "type": "menu_item",
      "name": "Menu Item",
      "settings": [
        {
          "type": "text",
          "id": "label",
          "label": "Menu Label"
        },
        {
          "type": "url",
          "id": "link",
          "label": "Menu Link"
        }
      ]
    },
    {
      "type": "icons",
      "name": "Header Icons",
      "limit": 1,
      "settings": [
        {
          "type": "checkbox",
          "id": "show_search",
          "label": "Show search",
          "default": true
        },
        {
          "type": "checkbox",
          "id": "show_account",
          "label": "Show account",
          "default": true
        },
        {
          "type": "checkbox",
          "id": "show_wishlist",
          "label": "Show wishlist",
          "default": true
        },
        {
          "type": "checkbox",
          "id": "show_cart",
          "label": "Show cart",
          "default": true
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Header",
      "blocks": [
        {
          "type": "menu_item",
          "settings": {
            "label": "Mega menu HTML",
            "link": "/"
          }
        },
        {
          "type": "menu_item",
          "settings": {
            "label": "Mega menu shop",
            "link": "/collections/all"
          }
        },
        {
          "type": "menu_item",
          "settings": {
            "label": "Mega menu product",
            "link": "/products"
          }
        },
        {
          "type": "menu_item",
          "settings": {
            "label": "Mega menu pages",
            "link": "/pages"
          }
        },
        {
          "type": "icons"
        }
      ]
    }
  ]
}
{% endschema %}

<script>
document.addEventListener('DOMContentLoaded', function() {
  const swipers = document.querySelectorAll('.tf-swiper');
  swipers.forEach(function(element) {
    const options = JSON.parse(element.dataset.swiper || '{}');
    new Swiper(element, options);
  });

  // Header scroll behavior
  const header = document.getElementById('header');
  let lastScrollTop = 0;

  window.addEventListener('scroll', function() {
    const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
    
    if (scrollTop < 87) {
      header.classList.remove('header-hidden');
      header.classList.remove('header-visible');
    } else if (scrollTop > lastScrollTop) {
      // Scrolling down
      header.classList.add('header-hidden');
      header.classList.remove('header-visible');
    } else {
      // Scrolling up
      header.classList.remove('header-hidden');
      header.classList.add('header-visible');
    }
    
    lastScrollTop = scrollTop;
  });
});
</script>

<style>
.header-hidden {
  transform: translateY(-100%);
}
.header-visible {
  transform: translateY(0);
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
}
</style> 