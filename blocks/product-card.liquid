{% assign product = all_products[block.settings.product] %}
{% assign style = style | default: block.settings.product_card_style | default: 'style-4' %}
{% assign show_sale_badge = show_sale_badge | default: block.settings.show_sale_badge %}
{% assign show_color_swatches = show_color_swatches | default: block.settings.show_color_swatches %}
{% assign show_quick_view = show_quick_view | default: block.settings.show_quick_view %}
{% assign show_wishlist = show_wishlist | default: block.settings.show_wishlist %}

{% render 'card-product',
  product: product,
  style: style,
  show_sale_badge: show_sale_badge,
  show_color_swatches: show_color_swatches,
  show_quick_view: show_quick_view,
  show_wishlist: show_wishlist,
  selected_variant: product.selected_or_first_available_variant
%}

{% schema %}
{
  "name": "Product Card",
  "settings": [
    {
      "type": "product",
      "id": "product",
      "label": "Product"
    },
    {
      "type": "select",
      "id": "product_card_style",
      "label": "Product card style",
      "options": [
        { "value": "style-1", "label": "Style 1" },
        { "value": "style-2", "label": "Style 2" },
        { "value": "style-3", "label": "Style 3" },
        { "value": "style-4", "label": "Style 4" }
      ],
      "default": "style-4"
    },
    {
      "type": "checkbox",
      "id": "show_sale_badge",
      "label": "Show Sale Badge",
      "default": false
    },
    {
      "type": "text",
      "id": "sale_badge_text",
      "label": "Sale Badge Text",
      "default": "Sale"
    },
    {
      "type": "checkbox",
      "id": "show_trending_badge",
      "label": "Show Trending Badge",
      "default": false
    },
    {
      "type": "text",
      "id": "trending_badge_text",
      "label": "Trending Badge Text",
      "default": "Trending"
    },
    {
      "type": "checkbox",
      "id": "show_color_swatches",
      "label": "Show Color Swatches",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_size_swatches",
      "label": "Show Size Swatches",
      "default": false
    },
    {
      "type": "text",
      "id": "size_swatches",
      "label": "Size Swatches",
      "info": "Comma-separated list of sizes",
      "default": "S,M,L,XL"
    },
    {
      "type": "checkbox",
      "id": "show_countdown",
      "label": "Show Countdown Timer",
      "default": false
    },
    {
      "type": "text",
      "id": "countdown_timer",
      "label": "Countdown Timer",
      "info": "Format: YYYY/MM/DD HH:MM:SS",
      "default": "2024/12/31 23:59:59"
    },
    {
      "type": "number",
      "id": "available_quantity",
      "label": "Available Quantity",
      "default": 50
    },
    {
      "type": "range",
      "id": "sold_percentage",
      "min": 0,
      "max": 100,
      "step": 5,
      "unit": "%",
      "label": "Sold Percentage",
      "default": 50
    },
    {
      "type": "checkbox",
      "id": "show_quick_view",
      "label": "Show quick view button",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_wishlist",
      "label": "Show wishlist button",
      "default": true
    }
  ],
  "presets": [
    {
      "name": "Product Card"
    }
  ]
}
{% endschema %} 