{%- if section.settings.show_section -%}
  <section>
    <div class="container">
      <div class="s-banner-countdown banner-cd-fashion">
        <div class="image">
          {%- if section.settings.banner_image != blank -%}
            <img src="{{ section.settings.banner_image | img_url: 'master' }}"
              data-src="{{ section.settings.banner_image | img_url: 'master' }}"
              alt="{{ section.settings.heading | escape }}"
              class="lazyload">
          {%- else -%}
            {{ 'lifestyle-1' | placeholder_svg_tag: 'placeholder-svg' }}
          {%- endif -%}
        </div>
        <div class="banner-content text-center">
          {% for block in section.blocks %}
            {% case block.type %}
              {% when 'heading' %}
                <div class="box-title wow fadeInUp" {{ block.shopify_attributes }}>
                  {%- if block.settings.season_text != blank -%}
                    <p class="season text-md fw-medium">
                      {{ block.settings.season_text }}
                    </p>
                  {%- endif -%}
                  {%- if block.settings.heading != blank -%}
                    <h2 class="fw-medium">
                      {{ block.settings.heading }}
                    </h2>
                  {%- endif -%}
                  {%- if block.settings.promo_code != blank -%}
                    <p class="sub text-md fw-medium">
                      WITH PROMOTE CODE: {{ block.settings.promo_code }}
                    </p>
                  {%- endif -%}
                </div>
              {% when 'countdown' %}
                {%- if block.settings.show_countdown and block.settings.end_date != blank -%}
                  {%- assign end_date = block.settings.end_date | date: '%Y-%m-%d %H:%M:%S' -%}
                  <div class="box-countdown d-flex justify-content-center wow fadeInUp" {{ block.shopify_attributes }}>
                    <div class="wg-countdown-2">
                      <div class="js-countdown" 
                           data-countdown="{{ end_date }}"
                           data-labels="Days,Hours,Mins,Secs"></div>
                    </div>
                  </div>
                {%- endif -%}
              {% when 'button' %}
                {%- if block.settings.button_label != blank -%}
                  <div class="box-btn wow fadeInUp" {{ block.shopify_attributes }}>
                    <a href="{{ block.settings.button_link }}" class="tf-btn btn-white hover-primary">
                      {{ block.settings.button_label }}
                    </a>
                  </div>
                {%- endif -%}
            {% endcase %}
          {% endfor %}
        </div>
      </div>
    </div>
  </section>
{%- endif -%}

{% schema %}
{
  "name": "Banner Countdown",
  "settings": [
    {
      "type": "header",
      "content": "Banner Settings"
    },
    {
      "type": "checkbox",
      "id": "show_section",
      "label": "Show section",
      "default": true
    },
    {
      "type": "image_picker",
      "id": "banner_image",
      "label": "Banner image"
    }
  ],
  "blocks": [
    {
      "type": "heading",
      "name": "Content",
      "limit": 1,
      "settings": [
        {
          "type": "text",
          "id": "season_text",
          "label": "Season text",
          "default": "SUMMER SALE"
        },
        {
          "type": "text",
          "id": "heading",
          "label": "Heading",
          "default": "50% OFF"
        },
        {
          "type": "text",
          "id": "promo_code",
          "label": "Promo code",
          "default": "12D34E"
        }
      ]
    },
    {
      "type": "countdown",
      "name": "Countdown Timer",
      "limit": 1,
      "settings": [
        {
          "type": "checkbox",
          "id": "show_countdown",
          "label": "Show countdown timer",
          "default": true
        },
        {
          "type": "text",
          "id": "end_date",
          "label": "End date (YYYY-MM-DD HH:MM:SS)",
          "default": "2024-12-31 23:59:59"
        }
      ]
    },
    {
      "type": "button",
      "name": "Button",
      "limit": 1,
      "settings": [
        {
          "type": "text",
          "id": "button_label",
          "label": "Button label",
          "default": "Shop Now"
        },
        {
          "type": "url",
          "id": "button_link",
          "label": "Button link"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Banner Countdown",
      "settings": {
        "show_section": true
      },
      "blocks": [
        {
          "type": "heading",
          "settings": {
            "season_text": "SUMMER SALE",
            "heading": "50% OFF",
            "promo_code": "12D34E"
          }
        },
        {
          "type": "countdown",
          "settings": {
            "show_countdown": true,
            "end_date": "2024-12-31 23:59:59"
          }
        },
        {
          "type": "button",
          "settings": {
            "button_label": "Shop Now"
          }
        }
      ]
    }
  ]
}
{% endschema %}