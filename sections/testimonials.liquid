{% schema %}
    {
        "name": "Testimonial",
        "settings": [
            {
                "type": "select",
                "id": "layout",
                "label": "Section Layout",
                "options": [
                    { "value": "default", "label": "Layout 1" },
                    { "value": "home-electronic", "label": "Layout 2" },
                    { "value": "home-fashion-women", "label": "Layout 3" },
                    { "value": "home-fashion-02", "label": "Layout 4" },
                    { "value": "home-phonecase", "label": "Layout 5" }
                ],
                "default": "default"
            },
            {
                "type": "text",
                "id": "title",
                "label": "Section Title",
                "default": "Happy Customers"
            },
            {
                "type": "text",
                "id": "subtitle",
                "label": "Section Subtitle",
                "default": "Experience with our products"
            },
            {
                "type": "header",
                "content": "Slider Settings"
            },
            {
                "type": "range",
                "id": "slides_per_view_mobile",
                "min": 1,
                "max": 3,
                "step": 1,
                "label": "Slides per view (Mobile)",
                "default": 1
            },
            {
                "type": "range",
                "id": "slides_per_view_tablet",
                "min": 1,
                "max": 3,
                "step": 1,
                "label": "Slides per view (Tablet)",
                "default": 2
            },
            {
                "type": "range",
                "id": "slides_per_view_desktop",
                "min": 1,
                "max": 3,
                "step": 1,
                "label": "Slides per view (Desktop)",
                "default": 3
            },
            {
                "type": "range",
                "id": "space_between_mobile",
                "min": 0,
                "max": 30,
                "step": 2,
                "label": "Space between slides (Mobile)",
                "default": 12
            },
            {
                "type": "range",
                "id": "space_between_desktop",
                "min": 0,
                "max": 50,
                "step": 2,
                "label": "Space between slides (Desktop)",
                "default": 24
            },
            {
                "type": "range",
                "id": "transition_speed",
                "min": 300,
                "max": 2000,
                "step": 100,
                "label": "Transition speed (ms)",
                "default": 800
            },
            {
                "type": "checkbox",
                "id": "show_navigation",
                "label": "Show navigation buttons",
                "default": true
            },
            {
                "type": "checkbox",
                "id": "show_pagination",
                "label": "Show pagination dots on mobile",
                "default": true
            },
            {
                "type": "checkbox",
                "id": "enable_autoplay",
                "label": "Enable autoplay",
                "default": false
            },
            {
                "type": "range",
                "id": "autoplay_speed",
                "min": 1000,
                "max": 9000,
                "step": 500,
                "label": "Autoplay speed (ms)",
                "default": 3000
            },
            {
                "type": "checkbox",
                "id": "pause_on_hover",
                "label": "Pause autoplay on hover",
                "default": true
            },
            {
                "type": "checkbox",
                "id": "enable_observer",
                "label": "Enable observer",
                "default": true,
                "info": "Update slider when DOM changes"
            }
        ],
        "blocks": [
            {
                "type": "testimonial",
                "name": "Testimonial",
                "settings": [
                    {
                        "type": "text",
                        "id": "name",
                        "label": "Customer Name",
                        "default": "Emily T."
                    },
                    {
                        "type": "image_picker",
                        "id": "image",
                        "label": "Customer Image"
                    },
                    {
                        "type": "image_picker",
                        "id": "testimonial_image",
                        "label": "Testimonial Image"
                    },
                    {
                        "type": "text",
                        "id": "product",
                        "label": "Product Name",
                        "default": "Crop T-shirt"
                    },
                    {
                        "type": "url",
                        "id": "product_url",
                        "label": "Product URL"
                    },
                    {
                        "type": "text",
                        "id": "price",
                        "label": "Product Price",
                        "default": "$150.00"
                    },
                    {
                        "type": "textarea",
                        "id": "review",
                        "label": "Customer Review",
                        "default": "The quality of the clothes exceeded my expectations. Every piece feels premium, and the designs are so trendy. I'm obsessed with my new wardrobe additions!"
                    },
                    {
                        "type": "text",
                        "id": "title",
                        "label": "Review Title",
                        "default": "Elegance and Comfort Combined"
                    }
                ]
            }
        ],
        "presets": [
            {
                "name": "Testimonial",
                "category": "Content",
                "blocks": [
                    {
                        "type": "testimonial"
                    },
                    {
                        "type": "testimonial"
                    }
                ]
            }
        ]
    }
    {% endschema %}
    
    <!-- Testimonial Section -->
    <section class="tf-testimonial {% if section.settings.layout == 'home-electronic' %}flat-spacing-2 pb-0{% elsif section.settings.layout == 'home-fashion-women' %}flat-spacing-3{% elsif section.settings.layout == 'home-fashion-02' %}flat-spacing-3{% elsif section.settings.layout == 'home-phonecase' %}bg-white mx_40 radius-16 flat-spacing-2{% endif %}">
        <div class="{% if section.settings.layout == 'home-phonecase' %}container{% else %}container{% endif %}" style="padding-left: 15px; padding-right: 15px;">
            {% if section.settings.layout != 'home-fashion-women' %}
                <div class="flat-title {% if section.settings.layout == 'home-electronic' %}text-start{% elsif section.settings.layout == 'home-phonecase' %}gap-10{% endif %} wow fadeInUp">
                    {% if section.settings.layout == 'home-phonecase' %}
                        <p class="desc text-md">{{ section.settings.subtitle }}</p>
                    {% endif %}
                    <h4 class="title">{{ section.settings.title }}</h4>
                </div>
            {% endif %}
    
            {% if section.settings.layout == 'home-phonecase' %}
                <div dir="ltr" class="swiper tf-swiper" data-swiper='{
                        "slidesPerView": 1,
                        "spaceBetween": 12,
                        "speed": 800,
                        "observer": true,
                        "observeParents": true,
                        "slidesPerGroup": 1,
                        "pagination": { "el": ".sw-pagination-tes", "clickable": true },
                        "breakpoints": {
                        "768": { "slidesPerView": 2, "spaceBetween": 24, "slidesPerGroup": 2 },
                        "1200": { "slidesPerView": 3, "spaceBetween": 24, "slidesPerGroup": 3}
                        }
                    }'>
                    <div class="swiper-wrapper wow fadeInUp">
                        {% for block in section.blocks %}
                            <div class="swiper-slide" {{ block.shopify_attributes }}>
                                <div class="wg-testimonial">
                                    <div class="content">
                                        <div class="content-top">
                                            <div class="box-author">
                                                <p class="name-author text-sm fw-medium">{{ block.settings.name }}</p>
                                                <div class="box-verified text-main">
                                                    <i class="icon-verifi"></i>
                                                    <p class="text-xs fst-italic">Verified Buyer</p>
                                                </div>
                                            </div>
                                            <div class="list-star-default">
                                                <i class="icon-star"></i>
                                                <i class="icon-star"></i>
                                                <i class="icon-star"></i>
                                                <i class="icon-star"></i>
                                                <i class="icon-star"></i>
                                            </div>
                                            <p class="text-review text-sm text-main">{{ block.settings.review }}</p>
                                        </div>
                                        <span class="br-line d-block"></span>
                                        <div class="box-avt">
                                            <div class="avatar">
                                                {% if block.settings.image != blank %}
                                                    <img class="lazyload" 
                                                         data-src="{{ block.settings.image | image_url: width: 400, height: 400 }}" 
                                                         src="{{ block.settings.image | image_url: width: 400, height: 400 }}" 
                                                         alt="{{ block.settings.name }}"
                                                         width="60" 
                                                         height="60">
                                                {% else %}
                                                    <img src="{{ 'author-fs1.jpg' | asset_url }}" 
                                                         alt="{{ block.settings.name }}" 
                                                         width="60" 
                                                         height="60">
                                                {% endif %}
                                            </div>
                                            <div class="box-price">
                                                <p class="name-item text-xs">
                                                    <a href="{{ block.settings.product_url }}" class="text-line-clamp-2">Item purchased:
                                                        <span class="fw-medium text-sm link">{{ block.settings.product }}</span>
                                                    </a>
                                                </p>
                                                <p class="price text-md fw-medium">
                                                    {{ block.settings.price }}
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        {% endfor %}
                    </div>
                    {% if section.settings.show_pagination %}
                        <div class="sw-dot-default sw-pagination-tes justify-content-center"></div>
                    {% endif %}
                </div>
            {% elsif section.settings.layout == 'home-fashion-women' %}
                <div class="wrapper-thumbs-tes-2 flat-thumbs-tes">
                    <div class="box-left">
                        <div dir="ltr" class="swiper tf-tes-main" data-space-lg="24" data-space="12">
                            <div class="swiper-wrapper">
                                {% for block in section.blocks %}
                                    <div class="swiper-slide" {{ block.shopify_attributes }}>
                                        <div class="box-testimonial-main wow fadeInLeft">
                                            <span class="quote icon-quote2"></span>
                                            <div class="content">
                                                <div class="list-star-default">
                                                    <i class="icon-star"></i>
                                                    <i class="icon-star"></i>
                                                    <i class="icon-star"></i>
                                                    <i class="icon-star"></i>
                                                    <i class="icon-star"></i>
                                                </div>
                                                <div class="title-review">{{ block.settings.title }}</div>
                                                <p class="text-review display-xs">{{ block.settings.review }}</p>
                                                <div class="box-author">
                                                    <div class="img d-md-none">
                                                        {% if block.settings.image != blank %}
                                                            <img class="lazyload" 
                                                                 data-src="{{ block.settings.image | image_url: width: 400, height: 400 }}" 
                                                                 src="{{ block.settings.image | image_url: width: 400, height: 400 }}" 
                                                                 alt="{{ block.settings.name }}"
                                                                 width="60" 
                                                                 height="60">
                                                        {% else %}
                                                            <img src="{{ 'author-fs1.jpg' | asset_url }}" 
                                                                 alt="{{ block.settings.name }}" 
                                                                 width="60" 
                                                                 height="60">
                                                        {% endif %}
                                                    </div>
                                                    <div class="info">
                                                        <div class="name text-md fw-medium">{{ block.settings.name }}</div>
                                                        <a href="{{ block.settings.product_url }}" class="meta link">Purchase item: <span class="fw-medium">{{ block.settings.product }}</span></a>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                {% endfor %}
                            </div>
                            {% if section.settings.show_navigation %}
                            <div class="box-nav-swiper">
                                <div class="swiper-button-prev nav-swiper size-30 style-line nav-prev-tes"></div>
                                <div class="swiper-button-next nav-swiper size-30 style-line nav-next-tes"></div>
                            </div>
                            {% endif %}
                        </div>
                    </div>
                    <div class="box-right">
                        <div dir="ltr" class="swiper tf-thumb-tes" data-space-lg="24" data-space="12">
                            <div class="swiper-wrapper">
                                {% for block in section.blocks %}
                                    <div class="swiper-slide hover-img">
                                        <div class="img-sw-thumb img-style">
                                            {% if block.settings.image != blank %}
                                                <img class="lazyload" 
                                                     data-src="{{ block.settings.image | image_url: width: 400, height: 400 }}" 
                                                     src="{{ block.settings.image | image_url: width: 400, height: 400 }}" 
                                                     alt="{{ block.settings.name }}"
                                                     width="400"
                                                     height="400">
                                            {% else %}
                                                <img class="lazyload" 
                                                     data-src="{{ 'author-fs1.jpg' | asset_url }}" 
                                                     src="{{ 'author-fs1.jpg' | asset_url }}" 
                                                     alt="{{ block.settings.name }}"
                                                     width="400"
                                                     height="400">
                                            {% endif %}
                                        </div>
                                    </div>
                                {% endfor %}
                            </div>
                        </div>
                    </div>
                </div>
            {% elsif section.settings.layout == 'home-fashion-02' %}
                </div>
                <div class="slider-layout-right wow fadeInUp">
                    <div dir="ltr" class="swiper tf-swiper tf-sw-right" data-swiper='{
                        "slidesPerView": 1,
                        "spaceBetween": {{ section.settings.space_between_mobile }},
                        "speed": {{ section.settings.transition_speed }},
                        "observer": {{ section.settings.enable_observer }},
                        "observeParents": {{ section.settings.enable_observer }},
                        "slidesPerGroup": 1,
                        "navigation": {% if section.settings.show_navigation %}{
                            "clickable": true,
                            "nextEl": ".nav-next-tes",
                            "prevEl": ".nav-prev-tes"
                        }{% else %}false{% endif %},
                        "pagination": {% if section.settings.show_pagination %}{
                            "el": ".sw-pagination-testimonial",
                            "clickable": true
                        }{% else %}false{% endif %},
                        "autoplay": {% if section.settings.enable_autoplay %}{
                            "delay": {{ section.settings.autoplay_speed }},
                            "pauseOnMouseEnter": {{ section.settings.pause_on_hover }},
                            "disableOnInteraction": false
                        }{% else %}false{% endif %},
                        "breakpoints": {
                            "768": { "slidesPerView": 1.5, "spaceBetween": 12},
                            "1200": { "slidesPerView": 2.3, "spaceBetween": 24}
                        }
                    }'>
                        <div class="swiper-wrapper">
                            {% for block in section.blocks %}
                                <div class="swiper-slide" {{ block.shopify_attributes }}>
                                    <div class="wg-testimonial style-row hover-img">
                                        <div class="content">
                                            <div class="content-top">
                                                <div class="box-author">
                                                    <p class="name-author text-sm fw-medium">{{ block.settings.name }}</p>
                                                    <div class="box-verified text-main">
                                                        <i class="icon-verifi"></i>
                                                        <p class="text-xs fst-italic">Verified Buyer</p>
                                                    </div>
                                                </div>
                                                <div class="list-star-default">
                                                    <i class="icon-star"></i>
                                                    <i class="icon-star"></i>
                                                    <i class="icon-star"></i>
                                                    <i class="icon-star"></i>
                                                    <i class="icon-star"></i>
                                                </div>
                                                <p class="text-review text-sm text-main">{{ block.settings.review }}</p>
                                            </div>
                                            <span class="br-line d-block"></span>
                                            <div class="box-avt">
                                                <div class="avatar">
                                                    {% if block.settings.image != blank %}
                                                        <img class="lazyload" 
                                                             data-src="{{ block.settings.image | image_url: width: 400, height: 400 }}" 
                                                             src="{{ block.settings.image | image_url: width: 400, height: 400 }}" 
                                                             alt="{{ block.settings.name }}"
                                                             width="60" 
                                                             height="60">
                                                    {% else %}
                                                        <img src="{{ 'author-fs1.jpg' | asset_url }}" 
                                                             alt="{{ block.settings.name }}" 
                                                             width="60" 
                                                             height="60">
                                                    {% endif %}
                                                </div>
                                                <div class="box-price">
                                                    <p class="name-item text-xs">
                                                        <a href="{{ block.settings.product_url }}" class="text-line-clamp-2">Item purchased:
                                                            <span class="fw-medium text-sm link">{{ block.settings.product }}</span>
                                                        </a>
                                                    </p>
                                                    <p class="price text-md fw-medium">
                                                        {{ block.settings.price }}
                                                    </p>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="image img-style">
                                            {% if block.settings.testimonial_image != blank %}
                                                <img class="lazyload testimonial-image-mobile" 
                                                     data-src="{{ block.settings.testimonial_image | image_url: width: 400, height: 400 }}" 
                                                     src="{{ block.settings.testimonial_image | image_url: width: 400, height: 400 }}" 
                                                     alt="{{ block.settings.name }}"
                                                     width="300"
                                                     height="300">
                                            {% else %}
                                                <img class="lazyload testimonial-image-mobile" 
                                                     data-src="{{ 'tes-fs1.jpg' | asset_url }}" 
                                                     src="{{ 'tes-fs1.jpg' | asset_url }}" 
                                                     alt="{{ block.settings.name }}"
                                                     width="300"
                                                     height="300">
                                            {% endif %}
                                        </div>
                                    </div>
                                </div>
                            {% endfor %}
                        </div>
                        {% if section.settings.show_pagination %}
                            <div class="d-flex d-xl-none sw-dot-default sw-pagination-testimonial justify-content-center"></div>
                        {% endif %}
                    </div>
                </div>
            {% else %}
                <div dir="ltr" class="swiper tf-swiper" data-swiper='{
                    "slidesPerView": {{ section.settings.slides_per_view_mobile }},
                    "spaceBetween": {{ section.settings.space_between_mobile }},
                    "speed": {{ section.settings.transition_speed }},
                    "observer": {{ section.settings.enable_observer }},
                    "observeParents": {{ section.settings.enable_observer }},
                    "slidesPerGroup": 1,
                    "navigation": {% if section.settings.show_navigation %}{
                        "clickable": true,
                        "nextEl": ".nav-next-tes",
                        "prevEl": ".nav-prev-tes"
                    }{% else %}false{% endif %},
                    "pagination": {% if section.settings.show_pagination %}{
                        "el": ".sw-pagination-tes",
                        "clickable": true
                    }{% else %}false{% endif %},
                    "autoplay": {% if section.settings.enable_autoplay %}{
                        "delay": {{ section.settings.autoplay_speed }},
                        "pauseOnMouseEnter": {{ section.settings.pause_on_hover }},
                        "disableOnInteraction": false
                    }{% else %}false{% endif %},
                    "breakpoints": {
                        "768": {
                            "slidesPerView": {{ section.settings.slides_per_view_tablet }},
                            "spaceBetween": {{ section.settings.space_between_mobile }},
                            "slidesPerGroup": 2
                        },
                        "1200": {
                            "slidesPerView": {{ section.settings.slides_per_view_desktop }},
                            "spaceBetween": {{ section.settings.space_between_desktop }},
                            "slidesPerGroup": 3
                        }
                    }
                }'>
                    <div class="swiper-wrapper">
                        {% for block in section.blocks %}
                            <div class="swiper-slide" {{ block.shopify_attributes }}>
                                <div class="wg-testimonial wow fadeInLeft" data-wow-delay="{{ forloop.index | times: 0.1 }}s">
                                    <div class="content">
                                        <div class="content-top">
                                            <div class="box-author">
                                                <p class="name-author text-sm fw-medium">{{ block.settings.name }}</p>
                                                <div class="box-verified text-main">
                                                    <i class="icon-verifi"></i>
                                                    <p class="text-xs fst-italic">Verified Buyer</p>
                                                </div>
                                            </div>
                                            <div class="list-star-default">
                                                <i class="icon-star"></i>
                                                <i class="icon-star"></i>
                                                <i class="icon-star"></i>
                                                <i class="icon-star"></i>
                                                <i class="icon-star"></i>
                                            </div>
                                            <p class="text-review text-sm text-main">
                                                {{ block.settings.review }}
                                            </p>
                                        </div>
                                        <span class="br-line d-block"></span>
                                        <div class="box-avt">
                                            <div class="avatar">
                                                {% if block.settings.image != blank %}
                                                    <img class="lazyload" 
                                                         data-src="{{ block.settings.image | image_url: width: 400, height: 400 }}" 
                                                         src="{{ block.settings.image | image_url: width: 400, height: 400 }}" 
                                                         alt="{{ block.settings.name }}"
                                                         width="60" 
                                                         height="60">
                                                {% else %}
                                                    <img src="{{ 'author-fs1.jpg' | asset_url }}" 
                                                         alt="{{ block.settings.name }}" 
                                                         width="60" 
                                                         height="60">
                                                {% endif %}
                                            </div>
                                            <div class="box-price">
                                                <p class="name-item text-xs">
                                                    <a href="{{ block.settings.product_url }}" class="text-line-clamp-2">Item purchased:
                                                        <span class="fw-medium text-sm link">{{ block.settings.product }}</span>
                                                    </a>
                                                </p>
                                                <p class="price text-md fw-medium">
                                                    {{ block.settings.price }}
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        {% endfor %}
                    </div>
                    {% if section.settings.show_pagination %}
                        <div class="sw-dot-default sw-pagination-tes justify-content-center"></div>
                    {% endif %}
                </div>
            {% endif %}
        </div>
    </section>
    <!-- End Testimonial Section --> 
    
    <style>
        /* Desktop 5:4 aspect ratio for home-fashion-02 layout */
        .tf-testimonial .wg-testimonial.style-row .image img.testimonial-image-mobile {
            width: 100% !important;
            height: auto !important;
            aspect-ratio: 4/5;
            object-fit: cover;
        }
        
        /* Tablet 4/7 aspect ratio for home-fashion-02 layout */
        @media (min-width: 768px) and (max-width: 1199px) {
            .tf-testimonial .wg-testimonial.style-row .image img.testimonial-image-mobile {
                aspect-ratio: 4/7;
            }
        }
        
        /* Mobile 1:1 aspect ratio for home-fashion-02 layout */
        @media (max-width: 767px) {
            .tf-testimonial .wg-testimonial.style-row .image img.testimonial-image-mobile {
                aspect-ratio: 1/1;
            }
        }
        @media (min-width: 768px) and (max-width: 1400px) {
            .tf-testimonial .wg-testimonial.style-row .image {
                height: 100%;
                display: flex;
                align-items: stretch;
            }
            .tf-testimonial .wg-testimonial.style-row .image img.testimonial-image-mobile {
                aspect-ratio: 4/7;
                height: 100%;
                width: 100%;
                object-fit: cover;
                display: block;
            }
        }
    </style> 