{%- style -%}
.pw-section {
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: stretch;
  background: #fff;
}
.pw-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  width: 100%;
  max-width: 1200px;
  margin: 0 auto;
  padding: 2.5rem 2rem 0 2rem;
  box-sizing: border-box;
}
.pw-logo {
  font-size: 2rem;
  font-weight: 700;
  letter-spacing: -0.03em;
  color: #111;
  text-decoration: none;
}
.pw-password-link {
  font-size: 1rem;
  color: #111;
  text-decoration: underline;
  display: flex;
  align-items: center;
  gap: 0.4em;
  font-weight: 500;
}
.pw-password-link svg {
  width: 1em;
  height: 1em;
  margin-right: 0.2em;
}
.pw-main {
  flex: 1 1 auto;
  display: flex;
  justify-content: center;
  align-items: center;
  min-height: 0;
  padding: 0 1rem;
}
.pw-inner {
  width: 100%;
  max-width: 520px;
  margin: 0 auto;
  padding: 2.5rem 2rem 2.5rem 2rem;
  border: 1px solid rgb(var(--color-foreground, 34,34,34));
  border-radius: var(--rounded-input, 8px);
  background: #fff;
  box-sizing: border-box;
}
.pw-title {
  font-size: 2.5rem;
  font-weight: 400;
  text-align: center;
  margin-bottom: 1.2rem;
}
.pw-subheading {
  text-align: center;
  color: #444;
  margin-bottom: 2.2rem;
  font-size: 1.1rem;
}
.pw-newsletter {
  margin-bottom: 2.2rem;
}
.pw-newsletter input.pw-input {
  width: 100%;
  padding: 1.1rem 1.2rem;
  border: 1px solid #d1d5db;
  border-radius: 4px;
  background: #fff;
  font-size: 1rem;
  margin-bottom: 1rem;
  box-sizing: border-box;
}
.pw-newsletter-btn {
  width: 100%;
  background: #111;
  color: #fff;
  border: none;
  border-radius: 4px;
  padding: 1rem 0;
  font-size: 1.1rem;
  font-weight: 500;
  cursor: pointer;
  transition: background 0.2s;
}
.pw-newsletter-btn:hover {
  background: #222;
}
.pw-socials {
  display: flex;
  justify-content: center;
  gap: 1.2rem;
  margin-top: 2.2rem;
}
.pw-socials a {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 2.5rem;
  height: 2.5rem;
  border: 1px solid #d1d5db;
  border-radius: 50%;
  color: #111;
  font-size: 1.2rem;
  transition: background 0.2s, color 0.2s;
  text-decoration: none;
}
.pw-socials a:hover {
  background: #111;
  color: #fff;
}
@media (max-width: 600px) {
  .pw-inner {
    padding: 1.5rem 0.5rem;
  }
  .pw-header {
    padding: 1.5rem 0.5rem 0 0.5rem;
  }
  .pw-title {
    font-size: 2rem;
  }
}
{%- endstyle -%}
<div class="pw-section" color-scheme="{{ section.settings.color_scheme }}">
  <div class="pw-header">
    <a class="pw-logo" href="/">{{ shop.name }}</a>
    <a href="#" class="pw-password-link" onclick="document.getElementById('passwordModal').style.display = 'block'; document.getElementById('passwordModal').classList.add('show'); return false;">
      <svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M12 17v1m0-8a4 4 0 0 1 4 4v1a4 4 0 0 1-8 0v-1a4 4 0 0 1 4-4zm0 0V7a4 4 0 1 1 8 0v4"/></svg>
      {{ 'general.password_page.login_form_submit' | t }}
    </a>
  </div>
  <div class="pw-main">
    <div class="pw-inner pw-rounded">
      <div class="pw-content">
        {%- if section.settings.heading != blank -%}<h2 class="pw-title">{{ section.settings.heading }}</h2>{%- endif -%}
        {%- if section.settings.content != blank -%}<div class="pw-subheading">{{ section.settings.content }}</div>{%- endif -%}
        <div class="pw-newsletter">
          <form action="#" class="pw-newsletter-form" method="post" accept-charset="utf-8" data-mailchimp="true" autocomplete="off">
            <div class="pw-field pw-relative" style="margin-bottom: 2rem;">
              <input type="email" name="email-form" class="pw-input" placeholder="{{ 'footer.newsletter.placeholder' | t }}" aria-required="true" required>
            </div>
            <div class="pw-field pw-field-btns pw-row-grid pw-grid-cols-1 pw-row-grid-modify pw-justify-center">
              <button class="tf-btn animate-btn d-inline-flex bg-dark-2 w-100 justify-content-center" type="submit" style="width:100%;"><span>{{ 'footer.newsletter.title' | t }}</span></button>
            </div>
          </form>
          <div id="pw-newsletter-success-message" class="pw-newsletter-success-message" style="margin-top: 15px; color: #28a745; font-size: 14px; display: none; text-align: center;">
            {{ 'footer.newsletter.success_message' | t }}
          </div>
        </div>
        <div class="pw-socials">
            {%- if settings.social_facebook_link != blank -%}
                  <a href="{{ settings.social_facebook_link }}" class="social-item social-facebook" target="_blank" rel="noopener">
                    <i class="icon icon-fb"></i>
                  </a>
              {%- endif -%}
              {%- if settings.social_instagram_link != blank -%}
                  <a href="{{ settings.social_instagram_link }}" class="social-item social-instagram" target="_blank" rel="noopener">
                    <i class="icon icon-instagram"></i>
                  </a>
              {%- endif -%}
              {%- if settings.social_twitter_link != blank -%}
                  <a href="{{ settings.social_twitter_link }}" class="social-item social-twitter" target="_blank" rel="noopener">
                    <i class="icon icon-x"></i>
                  </a>
              {%- endif -%}
              {%- if settings.social_pinterest_link != blank -%}
                  <a href="{{ settings.social_pinterest_link }}" class="social-item social-pinterest" target="_blank" rel="noopener">
                    <i class="icon icon-pinterest"></i>
                  </a>
              {%- endif -%}
              {%- if settings.social_youtube_link != blank -%}
                  <a href="{{ settings.social_youtube_link }}" class="social-item social-youtube" target="_blank" rel="noopener">
                    <i class="icon icon-youtube"></i>
                  </a>
              {%- endif -%}
              {%- if settings.social_tiktok_link != blank -%}
                  <a href="{{ settings.social_tiktok_link }}" class="social-item social-tiktok" target="_blank" rel="noopener">
                    <i class="icon icon-tiktok"></i>
                  </a>
              {%- endif -%}
              {%- if settings.social_linkedin_link != blank -%}
                  <a href="{{ settings.social_linkedin_link }}" class="social-item social-linkedin" target="_blank" rel="noopener">
                    <i class="icon icon-linkedin"></i>
                  </a>
              {%- endif -%}
        </div>
      </div>
    </div>
  </div>
</div>
<div class="modal fade modalCentered modal-quick-view" id="passwordModal" style="display:none;">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <span class="icon-close icon-close-popup" data-modal-close style="cursor:pointer;"></span>
      <div style="padding:2.5rem 0rem 2rem 0rem;margin:0 auto;">
        <h5 class="pw-s-text pw-text-10xl pw-font-normal" style="text-align:center;margin-bottom:2rem;">{{ 'general.password_page.login_form_heading' | t }}</h5>
        <div class="pw-password-form-popup">
          {%- form 'storefront_password' -%}
            <div class="pw-field pw-relative" style="margin-bottom: 2rem;">
              <input type="password" name="password" id="Password" class="pw-input" autocomplete="current-password" {% if form.errors %} aria-invalid="true" aria-describedby="PasswordLoginForm-password-error" {%- endif -%} required="required" placeholder="{{ 'general.password_page.login_form_password_placeholder' | t }}" required>
            </div>
            <div class="pw-field pw-field-btns pw-row-grid pw-grid-cols-1 pw-row-grid-modify pw-justify-center">
              <button name="commit" class="tf-btn animate-btn d-inline-flex bg-dark-2 w-100 justify-content-center" style="width:100%;"><span class="pw-truncate"> {{ 'general.password_page.login_form_submit' | t }}</span></button>
            </div>
          {%- endform -%}
        </div>
      </div>
    </div>
  </div>
</div>
<script>
(function() {
  var modal = document.getElementById('passwordModal');
  var openBtn = document.querySelector('.pw-password-link');
  var closeBtn = modal.querySelector('[data-modal-close]');
  var backdropClass = 'modal-backdrop fade';
  // Helper to create backdrop
  function createBackdrop() {
    var backdrop = document.createElement('div');
    backdrop.className = backdropClass;
    setTimeout(function(){backdrop.classList.add('show');}, 10);
    backdrop.addEventListener('click', closeModal);
    return backdrop;
  }
  // Open modal
  openBtn && openBtn.addEventListener('click', function(e) {
    e.preventDefault();
    modal.style.display = 'block';
    setTimeout(function(){modal.classList.add('show');}, 10);
    // Add backdrop if not present
    if (!document.querySelector('.modal-backdrop')) {
      document.body.appendChild(createBackdrop());
    }
  });
  // Close modal
  function closeModal() {
    modal.classList.remove('show');
    setTimeout(function(){modal.style.display = 'none';}, 200);
    // Remove backdrop
    var backdrop = document.querySelector('.modal-backdrop');
    if (backdrop) backdrop.parentNode.removeChild(backdrop);
  }
  closeBtn && closeBtn.addEventListener('click', closeModal);
  // Click outside modal dialog closes modal
  modal.addEventListener('click', function(e) {
    if (e.target === modal) {
      closeModal();
    }
  });
  // ESC key closes modal
  document.addEventListener('keydown', function(e) {
    if (e.key === 'Escape' && modal.classList.contains('show')) {
      closeModal();
    }
  });
  // Newsletter AJAX behavior (match coming soon)
  document.addEventListener('DOMContentLoaded', function() {
    const pwForm = document.querySelector('.pw-newsletter-form');
    const pwSuccess = document.getElementById('pw-newsletter-success-message');
    if (pwForm) {
      pwForm.addEventListener('submit', function(e) {
        e.preventDefault();
        const emailInput = this.querySelector('input[type="email"]');
        const submitButton = this.querySelector('button[type="submit"]');
        const email = emailInput.value;
        if (!email || !email.includes('@')) {
          alert('Please enter a valid email address.');
          return;
        }
        submitButton.disabled = true;
        const originalText = submitButton.textContent;
        submitButton.textContent = 'Submitting...';
        setTimeout(() => {
          this.style.display = 'none';
          if (pwSuccess) {
            pwSuccess.style.display = 'block';
          }
          this.reset();
          submitButton.disabled = false;
          submitButton.textContent = originalText;
          setTimeout(() => {
            if (pwSuccess) {
              pwSuccess.style.transition = 'opacity 0.5s ease-out';
              pwSuccess.style.opacity = '0';
              setTimeout(() => {
                pwSuccess.style.display = 'none';
                pwSuccess.style.opacity = '1';
                pwForm.style.display = '';
              }, 500);
            }
          }, 5000);
        }, 1000);
      });
    }
  });
})();
</script>

{% schema %}
{
  "name": "Password Page",
  "class": "pw-section-main-password",
  "settings": [
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "t:sections.all.colors.label"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "t:sections.main-password.settings.heading.label",
      "default": "Coming Soon!"
    },
    {
      "type": "richtext",
      "id": "content",
      "label": "t:sections.main-password.settings.content.label",
      "default": "<p>We are about to go public so be sure to root on us and check back in anytime!<br> Can't wait to have you!</p>"
    },
    {
      "type": "paragraph",
      "content": "t:settings_schema.social-media.settings.paragraph.content"
    },
    {
      "type": "select",
      "id": "socials_style",
      "label": "t:settings_schema.social-media.settings.social_style.label",
      "default": "default",
      "options": [
        {
          "value": "default",
          "label": "t:settings_schema.social-media.settings.social_style.options__1.label"
        },
        {
          "value": "outline",
          "label": "t:settings_schema.social-media.settings.social_style.options__2.label"
        },
        {
          "value": "simple",
          "label": "t:settings_schema.social-media.settings.social_style.options__3.label"
        }
      ]
    },
    {
      "type": "select",
      "id": "socials_size",
      "label": "t:settings_schema.social-media.settings.social_size.label",
      "default": "medium",
      "options": [
        {
          "value": "small",
          "label": "t:settings_schema.social-media.settings.social_size.options__1.label"
        },
        {
          "value": "medium",
          "label": "t:settings_schema.social-media.settings.social_size.options__2.label"
        },
        {
          "value": "large",
          "label": "t:settings_schema.social-media.settings.social_size.options__3.label"
        }
      ]
    }
  ]
}
{% endschema %} 