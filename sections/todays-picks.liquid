<section class="flat-spacing-3 pt-0 overflow-hidden" style="background-color: {{ section.settings.section_bg_color }}; padding-top: {{ section.settings.padding_top }}px; padding-bottom: {{ section.settings.padding_bottom }}px;">
  <div class="container">
    <div class="flat-title {% if section.settings.enable_wow %}wow fadeInUp{% endif %}" {% if section.settings.enable_wow %}data-wow-delay="{{ section.settings.wow_delay }}"{% endif %}>
      <h4 class="title" style="color: {{ section.settings.title_color }};">
        {{ section.settings.title }}
      </h4>
    </div>
    <div class="fl-control-sw2 pos2 {% if section.settings.enable_wow %}wow fadeInUp{% endif %}" {% if section.settings.enable_wow %}data-wow-delay="{{ section.settings.wow_delay }}"{% endif %}>
      <div dir="ltr" class="swiper tf-swiper wrap-sw-over" 
        data-swiper='{
          "slidesPerView": 2,
          "spaceBetween": {{ section.settings.space_between }},
          "speed": {{ section.settings.speed }},
          "observer": true,
          "observeParents": true,
          "slidesPerGroup": 2,
          "autoplay": {% if section.settings.autoplay %}true{% else %}false{% endif %},
          "autoplayDelay": {{ section.settings.autoplay_speed }},
          "loop": {% if section.settings.loop %}true{% else %}false{% endif %},
          "navigation": {
            "clickable": true,
            "nextEl": ".nav-next-top-pick",
            "prevEl": ".nav-prev-top-pick"
          },
          "pagination": { 
            "el": ".sw-pagination-top-pick", 
            "clickable": true 
          },
          "breakpoints": {
            "768": { 
              "slidesPerView": 3, 
              "spaceBetween": {{ section.settings.space_between }}, 
              "slidesPerGroup": 3 
            },
            "1200": { 
              "slidesPerView": {{ section.settings.products_to_show }}, 
              "spaceBetween": {{ section.settings.space_between }}, 
              "slidesPerGroup": {{ section.settings.products_to_show }}
            }
          }
        }'>
        <div class="swiper-wrapper">
          {%- for block in section.blocks -%}
            <div class="swiper-slide" {{ block.shopify_attributes }}>
              {% render block,
                style: section.settings.product_style,
                show_sale_badge: section.settings.show_sale_badge,
                show_color_swatches: section.settings.show_color_swatches,
                show_quick_view: section.settings.show_quick_view,
                show_wishlist: section.settings.show_wishlist
              %}
            </div>
          {%- endfor -%}
        </div>
        {% if section.settings.show_dots %}
        <div class="d-flex d-xl-none sw-dot-default sw-pagination-top-pick justify-content-center"></div>
        {% endif %}
      </div>
      {% if section.settings.show_arrows %}
      <div class="d-none d-xl-flex swiper-button-next nav-swiper nav-next-top-pick"></div>
      <div class="d-none d-xl-flex swiper-button-prev nav-swiper nav-prev-top-pick"></div>
      {% endif %}
    </div>
  </div>
</section>

{% schema %}
{
  "name": "Today's Picks",
  "settings": [
    {
      "type": "text",
      "id": "title",
      "label": "Title",
      "default": "Today's Picks"
    },
    {
      "type": "range",
      "id": "products_to_show",
      "min": 2,
      "max": 6,
      "step": 1,
      "label": "Products to show at once",
      "default": 4,
      "info": "Number of products visible in the slider at the same time"
    },
    {
      "type": "header",
      "content": "Colors"
    },
    {
      "type": "color",
      "id": "section_bg_color",
      "label": "Section background color",
      "default": "#FFFFFF"
    },
    {
      "type": "color",
      "id": "title_color",
      "label": "Title color",
      "default": "#000000"
    },
    {
      "type": "header",
      "content": "Product Card Settings"
    },
    {
      "type": "select",
      "id": "product_style",
      "label": "Product card style",
      "options": [
        { "value": "style-1", "label": "Style 1" },
        { "value": "style-2", "label": "Style 2" },
        { "value": "style-3", "label": "Style 3" },
        { "value": "style-4", "label": "Style 4" }
      ],
      "default": "style-4"
    },
    {
      "type": "checkbox",
      "id": "show_sale_badge",
      "label": "Show sale badge",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_color_swatches",
      "label": "Show color swatches",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_quick_view",
      "label": "Show quick view button",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_wishlist",
      "label": "Show wishlist button",
      "default": true
    },
    {
      "type": "header",
      "content": "Slider Settings"
    },
    {
      "type": "checkbox",
      "id": "autoplay",
      "label": "Enable autoplay",
      "default": true
    },
    {
      "type": "range",
      "id": "autoplay_speed",
      "min": 2000,
      "max": 9000,
      "step": 500,
      "unit": "ms",
      "label": "Autoplay delay",
      "default": 5000
    },
    {
      "type": "checkbox",
      "id": "loop",
      "label": "Enable loop",
      "default": true
    },
    {
      "type": "range",
      "id": "speed",
      "min": 100,
      "max": 2000,
      "step": 100,
      "unit": "ms",
      "label": "Transition speed",
      "default": 800
    },
    {
      "type": "checkbox",
      "id": "show_arrows",
      "label": "Show navigation arrows",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_dots",
      "label": "Show pagination dots",
      "default": true
    },
    {
      "type": "range",
      "id": "space_between",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Space between items",
      "default": 24
    },
    {
      "type": "header",
      "content": "Spacing"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 200,
      "step": 4,
      "unit": "px",
      "label": "Top padding",
      "default": 0
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 200,
      "step": 4,
      "unit": "px",
      "label": "Bottom padding",
      "default": 0
    },
    {
      "type": "header",
      "content": "Animation"
    },
    {
      "type": "checkbox",
      "id": "enable_wow",
      "label": "Enable fade-in animation",
      "default": true
    },
    {
      "type": "select",
      "id": "wow_delay",
      "label": "Animation delay",
      "options": [
        { "value": "0s", "label": "None" },
        { "value": "0.2s", "label": "Short" },
        { "value": "0.5s", "label": "Medium" },
        { "value": "0.8s", "label": "Long" }
      ],
      "default": "0.2s"
    }
  ],
  "max_blocks": 12,
  "blocks": [
    { "type": "@theme" }
  ],
  "presets": [
    {
      "name": "Today's Picks",
      "settings": {
        "title": "Today's Picks",
        "products_to_show": 4,
        "show_sale_badge": true,
        "show_color_swatches": true,
        "show_quick_view": true,
        "show_wishlist": true,
        "autoplay": true,
        "show_arrows": true,
        "show_dots": true
      },
      "blocks": [
        { "type": "product-card" },
        { "type": "product-card" },
        { "type": "product-card" },
        { "type": "product-card" }
      ]
    }
  ]
}
{% endschema %}