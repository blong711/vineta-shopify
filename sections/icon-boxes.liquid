{% schema %}
  {
    "name": "Brand",
    "settings": [
      {
        "type": "range",
        "id": "speed",
        "min": 20,
        "max": 200,
        "step": 10,
        "unit": "ms",
        "label": "Slider speed",
        "default": 80
      },
      {
        "type": "select",
        "id": "style",
        "label": "Slider style",
        "options": [
          {
            "value": "left",
            "label": "Left"
          },
          {
            "value": "right",
            "label": "Right"
          }
        ],
        "default": "left"
      },
      {
        "type": "range",
        "id": "clone",
        "min": 1,
        "max": 5,
        "step": 1,
        "label": "Number of clones",
        "default": 2
      }
    ],
    "blocks": [
      {
        "type": "brand",
        "name": "Brand",
        "settings": [
          {
            "type": "image_picker",
            "id": "brand_image",
            "label": "Brand image",
            "info": "Recommended size: 360px x 171px"
          },
          {
            "type": "url",
            "id": "brand_link",
            "label": "Brand link"
          }
        ]
      }
    ],
    "presets": [
      {
        "name": "Brand",
        "blocks": [
          {
            "type": "brand"
          },
          {
            "type": "brand"
          },
          {
            "type": "brand"
          },
          {
            "type": "brand"
          },
          {
            "type": "brand"
          },
          {
            "type": "brand"
          }
        ]
      }
    ]
  }
  {% endschema %}
  
  <style>
    .brand-item img {
      width: 100%;
      height: 100%;
      object-fit: contain;
    }
  </style>
  
  <div class="flat-spacing-2">
    <div class="container">
      <div class="infiniteslide tf-brand" data-clone="{{ section.settings.clone }}" data-style="{{ section.settings.style }}" data-speed="{{ section.settings.speed }}">
        {% for block in section.blocks %}
          <div class="brand-item" {{ block.shopify_attributes }}>
            {% if block.settings.brand_link != blank %}
              <a href="{{ block.settings.brand_link }}">
            {% endif %}
              {% if block.settings.brand_image != blank %}
                <img 
                  src="{{ block.settings.brand_image | img_url }}"
                  srcset="
                    {{ block.settings.brand_image | img_url: '180x' }} 180w,
                    {{ block.settings.brand_image | img_url: '360x' }} 360w
                  "
                  sizes="(max-width: 768px) 180px, 360px"
                  alt="{{ block.settings.brand_image.alt | escape | default: 'Brand logo' }}"
                  width="{{ block.settings.brand_image.width | default: 240 }}"
                  height="{{ block.settings.brand_image.height | default: 114 }}"
                  loading="lazy"
                  class="brand-logo"
                >
                {% comment %}Debug information{% endcomment %}
                <!-- Image Debug:
                  URL: {{ block.settings.brand_image | img_url }}
                  Alt: {{ block.settings.brand_image.alt }}
                  Width: {{ block.settings.brand_image.width }}
                  Height: {{ block.settings.brand_image.height }}
                -->
              {% else %}
                {{ 'image' | placeholder_svg_tag: 'placeholder-svg brand-logo' }}
              {% endif %}
            {% if block.settings.brand_link != blank %}
              </a>
            {% endif %}
          </div>
        {% endfor %}
      </div>
    </div>
  </div> 