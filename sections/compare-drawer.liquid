{%- comment -%}Compare Drawer Section{%- endcomment -%}
<div class="modal modalCentered fade modal-compare" id="compare">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <span class="icon icon-close btn-hide-popup" data-bs-dismiss="modal"></span>
            <div class="modal-compare-wrap list-file-delete">
                <h6 class="title text-center">Compare Products</h6>
                <div class="tf-compare-inner">
                    <div class="tf-compare-list">
                        {% assign compare_ids = '' %}
                        <script>
                            window.compareIds = localStorage.getItem('theme4:compare:id') ? localStorage.getItem('theme4:compare:id').split(',') : [];
                        </script>
                        
                        {% for product in collections.all.products %}
                            {% if compareIds contains product.id %}
                                <div class="tf-compare-item file-delete" data-product-id="{{ product.id }}">
                                    <button type="button" class="icon-close remove" data-compare data-id="{{ product.id }}" data-action="remove"></button>
                                    <a href="{{ product.url }}" class="image">
                                        <img class="lazyload" 
                                            data-src="{{ product.featured_image | img_url: '400x' }}"
                                            src="{{ product.featured_image | img_url: '400x' }}" 
                                            alt="{{ product.title | escape }}"
                                            width="400"
                                            height="400">
                                    </a>
                                    <div class="content">
                                        <div class="text-title">
                                            <a class="link text-line-clamp-2" href="{{ product.url }}">{{ product.title }}</a>
                                        </div>
                                        <p class="price-wrap">
                                            <span class="new-price text-primary">{{ product.price | money }}</span>
                                            {% if product.compare_at_price > product.price %}
                                                <span class="old-price text-decoration-line-through text-dark-1">{{ product.compare_at_price | money }}</span>
                                            {% endif %}
                                        </p>
                                    </div>
                                </div>
                            {% endif %}
                        {% endfor %}
                    </div>
                </div>
                <div class="tf-compare-buttons justify-content-center">
                    <a href="/pages/compare" class="tf-btn animate-btn justify-content-center">Compare</a>
                    <button type="button" class="tf-btn btn-out-line-dark justify-content-center" data-compare data-action="clear">Clear All</button>
                </div>
            </div>
        </div>
    </div>
</div>

{% schema %}    
{
  "name": "Compare Drawer",
  "settings": []
}
{% endschema %} 